<!-- templates/disk/sequential_download.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Скачивание файлов по очереди</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
</head>
<body>
  <div class="container py-4">
    <h1 class="mb-4">Скачивание файлов по очереди</h1>
    <p>Файлы начнут загружаться автоматически...</p>
  </div>
  <script>
    // Получаем список ссылок из контекста (он передается как JSON-строка)
    const downloadLinks = {{ download_links|safe }};
    let index = 0;

    function downloadNext() {
      if (index < downloadLinks.length) {
        const link = document.createElement("a");
        link.href = downloadLinks[index];
        // Добавляем ссылку временно на страницу и инициируем клик
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        index++;
        // Задержка между скачиваниями (например, 1 секунда)
        setTimeout(downloadNext, 1000);
      }
    }
    // Запускаем скачивание через небольшую задержку
    setTimeout(downloadNext, 500);
  </script>
</body>
</html>
